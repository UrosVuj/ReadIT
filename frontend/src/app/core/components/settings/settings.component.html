<body>
  <form id="form" *ngIf="this.user.username!='Guest'">
    <table style="
    border-radius: 10px;">
      <tr>
        <td>
          First name:
        </td>
        <td *ngIf="change_flag!=1" class="middle_col">
          {{user.first_name}}
        </td>
        <td *ngIf="change_flag!=1">
          <button class="change_field" (click)="changeField(1)">Change</button>
        </td>
        <td *ngIf="change_flag==1" class="middle_col">
          <input type="text" name="first_name" id="first_name" [(ngModel)]="first_name">
        </td>
        <td *ngIf="change_flag==1">
          <button class="change_field" (click)="submitChange('first_name')">Submit</button>
        </td>
      </tr>

      <tr>
        <td>
          Last name:
        </td>
        <td *ngIf="change_flag!=2" class="middle_col">
          {{user.last_name}}
        </td>
        <td *ngIf="change_flag!=2">
          <button class="change_field" (click)="changeField(2)">Change</button>
        </td>
        <td *ngIf="change_flag==2" class="middle_col">
          <input type="text" name="last_name" id="last_name" [(ngModel)]="last_name">
        </td>
        <td *ngIf="change_flag==2">
          <button class="change_field" (click)="submitChange('last_name')">Submit</button>
        </td>
      </tr>

      <tr>
        <td>
          Email:
        </td>
        <td *ngIf="change_flag!=3" class="middle_col">
          {{user.email}}
        </td>
        <td *ngIf="change_flag!=3">
          <button class="change_field" (click)="changeField(3)">Change</button>
        </td>
        <td *ngIf="change_flag==3" class="middle_col">
          <input type="text" name="email" id="email" [(ngModel)]="email">
        </td>
        <td *ngIf="change_flag==3">
          <button class="change_field" (click)="submitChange('email')">Submit</button>
        </td>
      </tr>

      <tr>
        <td>
          Country:
        </td>
        <td *ngIf="change_flag!=4" class="middle_col">
          {{user.country}}
        </td>
        <td *ngIf="change_flag!=4">
          <button class="change_field" (click)="changeField(4)">Change</button>
        </td>
        <td *ngIf="change_flag==4" class="middle_col">
          <input type="text" name="country" id="country" [(ngModel)]="country">
        </td>
        <td *ngIf="change_flag==4">
          <button class="change_field" (click)="submitChange('country')">Submit</button>
        </td>
      </tr>

      <tr>
        <td>
          City:
        </td>
        <td *ngIf="change_flag!=5" class="middle_col">
          {{user.city}}
        </td>
        <td *ngIf="change_flag!=5">
          <button class="change_field" (click)="changeField(5)">Change</button>
        </td>
        <td *ngIf="change_flag==5" class="middle_col">
          <input type="text" name="city" id="city" [(ngModel)]="city" required>
        </td>
        <td *ngIf="change_flag==5">
          <button class="change_field" (click)="submitChange('city')">Submit</button>
        </td>
      </tr>

      <tr>
        <td>
          Date of birth:
        </td>
        <td *ngIf="change_flag!=6" class="middle_col">
          {{birthday}}
        </td>
        <td *ngIf="change_flag!=6">
          <button class="change_field" (click)="changeField(6)">Change</button>
        </td>
        <td *ngIf="change_flag==6" class="middle_col">
          <input type="date" name="dob" id="date" [(ngModel)]="dob" required>
        </td>
        <td *ngIf="change_flag==6">
          <button class="change_field" (click)="submitChange('dob')">Submit</button>
        </td>
      </tr>


    </table>
  </form>
  <div id="change_pass">
    <div *ngIf="change_password==false" style="
    background-color: rgb(95, 95, 95); color: white;">
      <a (click)="setChangePass()">Click to change password</a>
    </div>
    <div *ngIf="change_password==true && (password_match == 1 || password_match == 3)" id="inp">
      <mat-form-field style="width: 70%;">
        <mat-label>Enter your old password</mat-label>
        <input matInput type="password" placeholder="Password" [(ngModel)]="curr_password">
      </mat-form-field>
      <button mat-flat-button style="margin-bottom: 15px; margin-left: 20px;" (click)="checkPassword()">Submit</button>
      <div *ngIf="password_match == 3">
        Password doesn't match!
      </div>
    </div>
    <div *ngIf="password_match == 2" id="inp2">

      <mat-form-field style="width: 70%;">
        <mat-label>Enter your new password</mat-label>
        <input matInput type="password" placeholder="Password" [(ngModel)]="new_password1">
      </mat-form-field>

      <button mat-flat-button style="margin-bottom: 15px; margin-left: 20px;"
        (click)="submitNewPassword()">Submit</button>

      <mat-form-field style="width: 70%;">
        <input matInput type="password" placeholder="Confirm password" [(ngModel)]="new_password2">

      </mat-form-field>

    </div>

    <div *ngIf="match_pass_flag == false && this.password_match ==2"
      style="color: red; text-align: center; padding-bottom:15px; padding-top: 15px;">
      {{this.match_ErrMessage}}
    </div>

    <div *ngIf="match_pass_flag == true && this.password_match==4"
      style="color: green; text-align: center; padding-bottom:15px; padding-top: 15px;">
      <a (click)="goBack_changePass()">Success! Click to go back</a>
    </div>
  </div>
  <div *ngIf=" this.user.username=='Guest'"
    style=" color: rgb(26, 27, 29); margin-left: 300px; margin-top: 200px; font-size: 30px;">
    Please register to access this page! :)
  </div>
</body>
